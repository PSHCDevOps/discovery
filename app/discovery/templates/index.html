{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Discovery</title>
    <base href="/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="{% static 'frontend/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'frontend/assets/uswds/css/uswds.min.css' %}">
    <link rel="stylesheet" href="{% static 'frontend/styles.css' %}">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    {% if GA_TRACKING_ID %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{GA_TRACKING_ID}}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('set', {'cookie_flags': 'SameSite=None;Secure;HttpOnly'});
      gtag('config', '{{GA_TRACKING_ID}}');

      // plugins 
      // gtag('require', 'urlChangeTracker', {fieldsObj: {dimension1: 'Page change'}});
      // gtag('require', 'outboundLinkTracker', {events: ['click', 'auxclick', 'contextmenu']});
      // gtag('require', 'eventTracker', {events: ['click', 'auxclick', 'contextmenu']});
   
      // the plugin referece is not defined in the new gtag scripts
      gtag('event', 'outboundLinkTracker', {events: ['click', 'auxclick', 'contextmenu']});
      gtag('event', 'eventTracker', {events: ['click', 'auxclick', 'contextmenu']});
      // dimensions
      gtag('event', 'urlChangeTracker', {fieldsObj: {dimension1: 'Page change'}});
      gtag('event', 'pageview', { dimension1: 'Page load'});
      

    </script>
    <!--<script async src="https://www.google-analytics.com/analytics.js"></script>-->
    <script async src="{% static 'frontend/assets/autotrack/autotrack.js' %}"></script>
    {% endif %}
</head>
<body>
    <discovery-root>Loading...</discovery-root>

    <script type="text/javascript">
        var API_HOST = "{{API_HOST}}";
        var SAM_API_KEY = "{{SAM_API_KEY}}";
        if (API_HOST.substring(API_HOST.length - 1) == '/') {
            API_HOST = API_HOST.substring(0, API_HOST.length - 1);
        }
    </script>

    <script type="text/javascript" src="{% static 'frontend/assets/uswds/js/uswds.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'frontend/runtime.js' %}"></script>
    <script type="text/javascript" src="{% static 'frontend/polyfills.js' %}"></script>
    <script type="text/javascript" src="{% static 'frontend/scripts.js' %}"></script>
    <script type="text/javascript" src="{% static 'frontend/main.js' %}"></script>
    <!-- We participate in the US government's analytics program. See the data at analytics.usa.gov. -->
    <!--<script async type="text/javascript" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=GSA" id="_fed_an_ua_tag"></script>-->

</body>
</html>
